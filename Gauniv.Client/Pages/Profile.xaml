<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:vm="clr-namespace:Gauniv.Client.ViewModel"
             x:Class="Gauniv.Client.Pages.Profile"
             Title="Profil"
             x:DataType="vm:ProfileViewModel"
             BackgroundColor="White">

    <ScrollView>
        <VerticalStackLayout Padding="20,30" Spacing="25">
            
            <!-- Header -->
            <VerticalStackLayout Spacing="10">
                <Label Text="Mon profil"
                       FontSize="40"
                       FontAttributes="Bold"
                       TextColor="#1A202C"/>
                
                <Label Text="{Binding StatusMessage}"
                       FontSize="16"
                       FontAttributes="Bold"
                       TextColor="#718096"/>
            </VerticalStackLayout>

            <!-- Login Form -->
            <VerticalStackLayout Spacing="15" IsVisible="{Binding IsConnected, Converter={StaticResource InvertedBoolConverter}}">
                <Label Text="Connexion"
                       FontSize="20"
                       FontAttributes="Bold"
                       TextColor="#2D3748"/>
                
                <VerticalStackLayout Spacing="8">
                    <Label Text="Email"
                           FontSize="14"
                           TextColor="#4A5568"/>
                    <Entry Text="{Binding Email}"
                           Placeholder="Votre email"
                           Keyboard="Email"
                           FontSize="16"
                           BackgroundColor="#F7FAFC"
                           TextColor="#2D3748"/>
                </VerticalStackLayout>

                <VerticalStackLayout Spacing="8">
                    <Label Text="Mot de passe"
                           FontSize="14"
                           TextColor="#4A5568"/>
                    <Entry Text="{Binding Password}"
                           Placeholder="Votre mot de passe"
                           IsPassword="True"
                           FontSize="16"
                           BackgroundColor="#F7FAFC"
                           TextColor="#2D3748"/>
                </VerticalStackLayout>

                <Button Text="Se connecter"
                        Command="{Binding LoginCommand}"
                        BackgroundColor="#4299E1"
                        TextColor="White"
                        FontAttributes="Bold"
                        FontSize="16"
                        CornerRadius="12"
                        HeightRequest="50"
                        Margin="0,10,0,0"/>
                
                <ActivityIndicator IsRunning="{Binding IsLoading}"
                                  IsVisible="{Binding IsLoading}"
                                  Color="#4299E1"
                                  HeightRequest="40"/>
            </VerticalStackLayout>

            <!-- Logout Section -->
            <VerticalStackLayout Spacing="15" IsVisible="{Binding IsConnected}">
                <Label Text="Compte connecté"
                       FontSize="20"
                       FontAttributes="Bold"
                       TextColor="#2D3748"/>
                
                <Frame Padding="15"
                       CornerRadius="12"
                       HasShadow="False"
                       BackgroundColor="#F0FFF4"
                       BorderColor="#9AE6B4">
                    <HorizontalStackLayout Spacing="10">
                        <Label Text=""
                               FontSize="24"
                               VerticalOptions="Center"/>
                        <VerticalStackLayout Spacing="5">
                            <Label Text="{Binding Email}"
                                   FontSize="16"
                                   FontAttributes="Bold"
                                   TextColor="#2D3748"/>
                             <Label Text="*********"
                                   FontSize="16"
                                   FontAttributes="Bold"
                                   TextColor="#2D3748"/>
                        </VerticalStackLayout>
                    </HorizontalStackLayout>
                </Frame>

                <Button Text="Se déconnecter"
                        Command="{Binding LogoutCommand}"
                        BackgroundColor="#E53E3E"
                        TextColor="White"
                        FontAttributes="Bold"
                        FontSize="16"
                        CornerRadius="12"
                        HeightRequest="30"/>
            </VerticalStackLayout>

        </VerticalStackLayout>
    </ScrollView>
</ContentPage>