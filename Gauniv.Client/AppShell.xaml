<?xml version="1.0" encoding="UTF-8" ?>
<Shell
    x:Class="Gauniv.Client.AppShell"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
       xmlns:local="clr-namespace:Gauniv.Client.Pages"
       xmlns:vm="clr-namespace:Gauniv.Client.ViewModel"
       xmlns:service="clr-namespace:Gauniv.Client.Services"
       Shell.FlyoutBehavior="Flyout"
       Shell.NavBarIsVisible="true"
       Title="Gauniv"
       BindingContext="{vm:MenuViewModel}"
       FlyoutBackgroundColor="{StaticResource BgMain}">

    <Shell.FlyoutHeader>
        <Grid HeightRequest="200" BackgroundColor="#0d1117">
            <VerticalStackLayout VerticalOptions="Center" HorizontalOptions="Center" Spacing="10">
                <Label Text="GAUNIV" 
                       FontSize="30" 
                       FontAttributes="Bold" 
                       TextColor="{StaticResource Primary}" 
                       CharacterSpacing="6"
                       HorizontalOptions="Center"/>
                <Label Text="{Binding UserName}" 
                       FontSize="16" 
                       TextColor="White" 
                       HorizontalOptions="Center"/>
                <Label Text="{Binding UserEmail}" 
                       FontSize="12" 
                       TextColor="{StaticResource TextMuted}" 
                       HorizontalOptions="Center"/>
            </VerticalStackLayout>
        </Grid>
    </Shell.FlyoutHeader>

    <Shell.ItemTemplate>
        <DataTemplate>
            <Grid Padding="20,12" ColumnDefinitions="45,*">
                <Label Text="{Binding Icon}" 
                       FontSize="22" 
                       VerticalOptions="Center" 
                       HorizontalOptions="Center"/>
                <Label Grid.Column="1" 
                       Text="{Binding Title}" 
                       FontSize="16" 
                       TextColor="White" 
                       VerticalOptions="Center" 
                       Margin="10,0,0,0"/>
            </Grid>
        </DataTemplate>
    </Shell.ItemTemplate>

    <FlyoutItem Title="Catalogue"
                Icon="ðŸŽ®"
                Route="games">
        <ShellContent ContentTemplate="{DataTemplate local:Index}" />
    </FlyoutItem>

    <FlyoutItem Title="Ma BibliothÃ¨que"
                  Icon="ðŸ“š"
                  Route="mygames"
                  IsVisible="{Binding IsNotAdmin}">
        <ShellContent ContentTemplate="{DataTemplate local:MyGames}" />
    </FlyoutItem>

    <FlyoutItem Title="Gestion des jeux"
                  Icon="ðŸ› ï¸"
                  Route="admin"
                  IsVisible="{Binding IsAdmin}">
        <ShellContent ContentTemplate="{DataTemplate local:AdminPage}" />
    </FlyoutItem>

    <FlyoutItem Title="Profil"
                  Icon="ðŸ‘¤"
                  Route="profile">
        <ShellContent ContentTemplate="{DataTemplate local:Profile}" />
    </FlyoutItem>

    <ShellContent Route="gamedetails"
                  FlyoutItemIsVisible="False"
                  ContentTemplate="{DataTemplate local:GameDetails}" />

    <ShellContent Route="purchasesuccess"
                  FlyoutItemIsVisible="False"
                  ContentTemplate="{DataTemplate local:PurchaseSuccessPage}" />
</Shell>
